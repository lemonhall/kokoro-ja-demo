# åˆ†è¯å™¨å®ç°çŠ¶æ€

## âœ… å·²å®ŒæˆåŠŸèƒ½

### 1. ä¸­æ–‡åˆ†è¯å™¨ï¼ˆJieba ç®—æ³•ï¼‰

**æ–‡ä»¶**ï¼š`src/core/misaki_tokenizer.c`

**æ ¸å¿ƒç®—æ³•**ï¼š
- âœ… DAG æ„å»ºï¼ˆåŸºäº Trie æ ‘å‰ç¼€åŒ¹é…ï¼‰
- âœ… åŠ¨æ€è§„åˆ’æœ€ä¼˜è·¯å¾„é€‰æ‹©
- âœ… ç²¾ç¡®æ¨¡å¼åˆ†è¯

**æµ‹è¯•çŠ¶æ€**ï¼š
- âœ… 3 ä¸ªæµ‹è¯•ç”¨ä¾‹å…¨éƒ¨é€šè¿‡
- âœ… çœŸå®è¯å…¸åŠ è½½éªŒè¯ï¼ˆ86 ä¸ªè¯æ±‡ï¼‰
- âœ… åˆ†è¯æ•ˆæœç¬¦åˆé¢„æœŸ

**ç¤ºä¾‹**ï¼š
```
è¾“å…¥ï¼š"æˆ‘ä»¬æ˜¯ä¸­å›½äººæ°‘"
è¾“å‡ºï¼š["æˆ‘", "ä»¬", "æ˜¯", "ä¸­å›½", "äººæ°‘"]

è¾“å…¥ï¼š"ç»æµå‘å±•éå¸¸å¿«"
è¾“å‡ºï¼š["ç»æµ", "å‘å±•", "éå¸¸", "å¿«"]
```

---

### 2. è‹±æ–‡åˆ†è¯å™¨ï¼ˆç©ºæ ¼+æ ‡ç‚¹åˆ†å‰²ï¼‰

**æ–‡ä»¶**ï¼š`src/core/misaki_tokenizer.c`

**ç®—æ³•**ï¼š
- âœ… ç©ºæ ¼åˆ†å‰²
- âœ… æ ‡ç‚¹ç¬¦å·å¤„ç†
- âœ… å¯é€‰ä¿ç•™/ç§»é™¤æ ‡ç‚¹

**æµ‹è¯•çŠ¶æ€**ï¼š
- âœ… 2 ä¸ªæµ‹è¯•ç”¨ä¾‹å…¨éƒ¨é€šè¿‡

**ç¤ºä¾‹**ï¼š
```
è¾“å…¥ï¼š"Hello world this is a test"
è¾“å‡ºï¼š["Hello", "world", "this", "is", "a", "test"]

è¾“å…¥ï¼š"Hello, world! How are you?"
ä¸ä¿ç•™æ ‡ç‚¹ï¼š["Hello", "world", "How", "are", "you"]
ä¿ç•™æ ‡ç‚¹ï¼š["Hello", ",", "world", "!", "How", "are", "you", "?"]
```

---

### 3. æ—¥æ–‡åˆ†è¯å™¨ï¼ˆè´ªå©ªåŒ¹é…ï¼‰

**æ–‡ä»¶**ï¼š`src/core/misaki_tokenizer.c`

**ç®—æ³•**ï¼š
- âœ… åŸºäº Trie æ ‘çš„æœ€é•¿åŒ¹é…
- âœ… ç®€åŒ–ç‰ˆï¼ˆæœªä½¿ç”¨å®Œæ•´ Viterbiï¼‰
- âœ… æœªåŒ¹é…å­—ç¬¦æŒ‰å•å­—åˆ†å‰²

**æµ‹è¯•çŠ¶æ€**ï¼š
- âœ… 1 ä¸ªæµ‹è¯•ç”¨ä¾‹é€šè¿‡

**ç¤ºä¾‹**ï¼š
```
è¾“å…¥ï¼š"ã“ã‚“ã«ã¡ã¯ä¸–ç•Œ"
è¾“å‡ºï¼š["ã“ã‚“ã«ã¡ã¯", "ä¸–ç•Œ"]
```

**æ³¨æ„**ï¼šå½“å‰æ˜¯ç®€åŒ–å®ç°ï¼Œå®Œæ•´çš„ MeCab åˆ†è¯éœ€è¦ï¼š
- Lattice è¯æ ¼æ„å»º
- Viterbi æœ€ä¼˜è·¯å¾„æœç´¢
- UniDic è¯å…¸æ”¯æŒ

---

## ğŸ“Š æµ‹è¯•è¦†ç›–ç‡

| æ¨¡å— | æµ‹è¯•æ•°é‡ | é€šè¿‡ç‡ | æ–‡ä»¶ |
|------|---------|--------|------|
| Token æ“ä½œ | 4 | 100% | `tests/test_tokenizer.c` |
| TokenList æ“ä½œ | 4 | 100% | `tests/test_tokenizer.c` |
| DAG æ“ä½œ | 3 | 100% | `tests/test_tokenizer.c` |
| DAG æ„å»º | 2 | 100% | `tests/test_tokenizer.c` |
| ä¸­æ–‡åˆ†è¯å™¨ | 3 | 100% | `tests/test_tokenizer.c` |
| è‹±æ–‡åˆ†è¯å™¨ | 2 | 100% | `tests/test_tokenizer.c` |
| æ—¥æ–‡åˆ†è¯å™¨ | 1 | 100% | `tests/test_tokenizer.c` |
| **æ€»è®¡** | **19** | **100%** | - |

---

## ğŸš€ ä¸‹ä¸€æ­¥ï¼šG2P æ¨¡å—

### G2P (Grapheme-to-Phoneme) è½¬æ¢å™¨

ç°åœ¨åˆ†è¯å™¨å·²å®Œæˆï¼Œå¯ä»¥å¼€å§‹å®ç° G2P æ¨¡å—ï¼Œå°†åˆ†è¯ç»“æœè½¬æ¢ä¸ºéŸ³ç´ ã€‚

#### ä¸­æ–‡ G2P
```
è¾“å…¥ï¼š["æˆ‘ä»¬", "æ˜¯", "ä¸­å›½", "äººæ°‘"]
â†“
æ‹¼éŸ³æŸ¥è¯¢ï¼ˆä½¿ç”¨ zh/pinyin_dict.txtï¼‰
â†“
è¾“å‡ºï¼š["wo3 men5", "shi4", "zhong1 guo2", "ren2 min2"]
```

#### è‹±æ–‡ G2P
```
è¾“å…¥ï¼š["Hello", "world"]
â†“
è¯å…¸æŸ¥è¯¢ï¼ˆä½¿ç”¨ en/us_dict.txtï¼‰
â†“
è¾“å‡ºï¼š["hÉ™ËˆloÊŠ", "wÉœrld"]
```

#### æ—¥æ–‡ G2P
```
è¾“å…¥ï¼š["ã“ã‚“ã«ã¡ã¯", "ä¸–ç•Œ"]
â†“
å‡åâ†’éŸ³ç´ æ˜ å°„
â†“
è¾“å‡ºï¼š["k o N n i ch i w a", "s e k a i"]
```

---

## ğŸ“ ç›¸å…³æ–‡ä»¶

### æ ¸å¿ƒå®ç°
- `src/core/misaki_tokenizer.c` (918 è¡Œ) - åˆ†è¯å™¨å®ç°
- `include/misaki_tokenizer.h` (416 è¡Œ) - åˆ†è¯å™¨æ¥å£

### æµ‹è¯•
- `tests/test_tokenizer.c` (569 è¡Œ) - 19 ä¸ªæµ‹è¯•ç”¨ä¾‹
- `tests/test_zh_tokenizer_real.c` (106 è¡Œ) - çœŸå®è¯å…¸æµ‹è¯•

### æ–‡æ¡£
- `docs/JIEBA_ALGORITHM.md` - Jieba å®Œæ•´ç®—æ³•ç§»æ¤è®¡åˆ’
- `docs/TOKENIZER_STATUS.md` - æœ¬æ–‡ä»¶

---

## ğŸ¯ G2P æ¨¡å—å¾…å®ç°åŠŸèƒ½

### 1. ä¸­æ–‡ G2P
```c
/**
 * ä¸­æ–‡æ–‡æœ¬è½¬æ‹¼éŸ³
 * 
 * @param tokenizer ä¸­æ–‡åˆ†è¯å™¨
 * @param zh_dict ä¸­æ–‡æ‹¼éŸ³è¯å…¸
 * @param text ä¸­æ–‡æ–‡æœ¬
 * @return Token åˆ—è¡¨ï¼ˆåŒ…å«æ‹¼éŸ³ï¼‰
 */
MisakiTokenList* misaki_zh_g2p(void *tokenizer,
                               const ZhDict *zh_dict,
                               const char *text);
```

### 2. è‹±æ–‡ G2P
```c
/**
 * è‹±æ–‡æ–‡æœ¬è½¬éŸ³ç´ 
 * 
 * @param en_dict è‹±æ–‡è¯å…¸
 * @param text è‹±æ–‡æ–‡æœ¬
 * @return Token åˆ—è¡¨ï¼ˆåŒ…å« IPA éŸ³ç´ ï¼‰
 */
MisakiTokenList* misaki_en_g2p(const EnDict *en_dict,
                               const char *text);
```

### 3. æ—¥æ–‡ G2P
```c
/**
 * æ—¥æ–‡æ–‡æœ¬è½¬éŸ³ç´ 
 * 
 * @param tokenizer æ—¥æ–‡åˆ†è¯å™¨
 * @param text æ—¥æ–‡æ–‡æœ¬
 * @return Token åˆ—è¡¨ï¼ˆåŒ…å«éŸ³ç´ ï¼‰
 */
MisakiTokenList* misaki_ja_g2p(void *tokenizer,
                               const char *text);
```

---

**æ›´æ–°æ—¶é—´**ï¼š2025-10-25  
**çŠ¶æ€**ï¼šåˆ†è¯å™¨å®Œæˆï¼Œå‡†å¤‡è¿›å…¥ G2P æ¨¡å—
